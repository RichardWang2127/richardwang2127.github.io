<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shortlink Encryptor</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: 50px auto; }
input, button { padding: 8px; font-size: 16px; margin: 5px 0; width: 100%; }
textarea { width: 100%; height: 60px; margin-top: 10px; font-size: 14px; }
</style>
</head>
<body>
<h2>Bilibili 视频加密器</h2>

<label for="bvid">输入 BVID:</label>
<input type="text" id="bvid" placeholder="例如 BV1xxxxxx">

<button id="encryptBtn">生成短链</button>

<label for="result">加密后 URL:</label>
<textarea id="result" readonly></textarea>

<script>
// 加密函数
function encryptBvid(bvid, key = 42) {
    let result = "";
    for (let i = 0; i < bvid.length; i++) {
        result += String.fromCharCode(bvid.charCodeAt(i) ^ key);
    }
    return btoa(result); // Base64 编码
}

document.getElementById("encryptBtn").addEventListener("click", () => {
    const bvid = document.getElementById("bvid").value.trim();
    if (!bvid) {
        alert("请输入 BVID");
        return;
    }
    const enc = encryptBvid(bvid, key);
    const url = `${window.location.origin}/st?id=${enc}`;
    document.getElementById("result").value = url;
});
</script>
</body>
</html>
